USE [newesms]
GO
/****** Object:  StoredProcedure [dbo].[usp_Profile]    Script Date: 11/20/2014 10:26:02 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER  PROCEDURE [dbo].[usp_Profile]
(
		@command varchar(50)=null,
		@intUser_id int=null,
		@intStudent_id int=null,
		@vchapplication_no int=null,
		@intAddmission_id int=null,
		@intstanderd_id int=null,
		@vchStudentFirst_name varchar(50)=null,
		@vchStudentMiddle_name varchar(50)=null,
		@vchStudentLast_name varchar(50)=null,
		@vchFatherName varchar(50)=null,
		@vchMotherName varchar(50)=null,
		@intParentID int=null,
		@vchGender varchar(5)=null,
		@dtDOB datetime =null,
		@vchplaceofBirth varchar(50)=null,
		@vchUser_name varchar(50)=null,
		@vchPassword varchar(50)=null,
		@vchActivestatus float=null,
		@dtActivationDate datetime=null,
		@dtDeactivationDate datetime=null,
		@intActivationBy int=null,
		@intDeactivationBy int=null,
		@vchCast varchar(50)=null,
		@vchsubcast varchar(50)=null,
		@vchEmail varchar(50)=null,
		@vchMothertongue varchar(50)=null,
		@vchpresentAddress varchar(50)=null,
		@vchpermanentAddress varchar(50)=null,
		@vchImageURL varchar(50)=null,
		@intHomePhoneNo1 varchar(50)=null,
		@intHomePhoneNo2 varchar(50)=null,
		@vchEmergencyConPerson1 varchar(50)=null,
		@intEmergencyContat1 numeric(18,0)=null,
		@vchEmergencyConPerson2 varchar(50)=null,
		@intEmergencyContat2 numeric(18,0)=null,
		@vchNeighbour_name varchar(50)=null,
		@intNeighborConNo numeric(18,0)=null,
		@chrBloodGrp varchar(10)=null,
		@vchPassport varchar(255)=null,
		@dtpassportissue datetime=null,
		@dtexpiredate datetime=null,
		@vchHandicapedStatus varchar(50)=null,
		@vchDescription varchar(50)=null,
		@vchIdentificationMarks varchar(50)=null,
		@chrLeftStatus varchar(255)=null,
		@dtLeftDate datetime =null,
		@vchLeftReason varchar(50)=null,
		@intDivision_id int=null,
		@intAcademicYear_id varchar(50)=null,
		@intRollNo int=null,
		@vchfatherFirst_name varchar(50)=null,
           @vchfatherMiddle_name varchar(50)=null,
           @vchfatherLast_name varchar(50)=null,
           @intFatherMobile varchar(50)=null,
           @dtFatherDBO varchar(50)=null,
           @vchFatherEmail varchar(50)=null,
           @vchAddress varchar(50)=null,
           @vchFatherPassport_no varchar(50)=null,
           @vchFatherCompanyName varchar(50)=null,
           @vchFatherDesignation varchar(50)=null,
           @vchFatherCompAdd varchar(50)=null,
           @intFatherTelNo varchar(50)=null,
           @fltFatherIncomeDet varchar(50)=null,
           @vchFather_vehicleName varchar(50)=null,
           @vchFather_VehicleNo varchar(50)=null,
           @vchFather_PAN varchar(50)=null,
           @vchFather_BloodGrp varchar(50)=null,
           @vchFatherHighestQualification varchar(50)=null,
           @vchFatherImageURL varchar(50)=null,
           @vchmotherFirst_name varchar(50)=null,
           @vchmotherMiddle_name varchar(50)=null,
           @vchmotherLast_name varchar(50)=null,
           @intMotherMobile varchar(50)=null,
           @dtMotherDBO varchar(50)=null,
           @vchMotherEmail varchar(50)=null,
           @vchPermanent varchar(50)=null,
           @vchMotherPassport_no varchar(50)=null,
           @vchMotherCompanyName varchar(50)=null,
           @vchMotherDesignation varchar(50)=null,
           @vchMotherCompAdd varchar(50)=null,
           @intMotherTelNo varchar(50)=null,
           @fltMotherIncomeDet varchar(50)=null,
           @vchMother_vehicleName varchar(50)=null,
           @vchMother_VehicleNo varchar(50)=null,
           @vchmother_PAN varchar(50)=null,
           @vchMother_BloodGrp varchar(50)=null,
           @vchMotherHighestQualification varchar(50)=null,
           @vchMotherImageURL varchar(50)=null,
           @vchguardianFirst_name varchar(50)=null,
           @vchguardianMiddle_name varchar(50)=null,
           @vchguardianLast_name varchar(50)=null,
           @intGuardianMobile varchar(50)=null,
           @dtGuardianDBO varchar(50)=null,
           @vchGuardianAddress varchar(50)=null,
           @vchGuardianEmail varchar(50)=null,
           @vchGuardianCompanyName varchar(50)=null,
           @vchGuardianDesignation varchar(50)=null,
           @vchGuardianCompAdd varchar(50)=null,
           @vchGuardianPassport_no varchar(50)=null,
		   @intGuardianTelNo varchar(50)=null,
           @fltGuardianIncomeDet varchar(50)=null,
           @vchGuardian_vehicleName varchar(50)=null,
           @vchGuardian_VehicleNo varchar(50)=null,
           @vchGuardian_PAN varchar(50)=null,
           @vchGuardian_BloodGrp varchar(50)=null,
           @vchGuardianHighestQualification varchar(50)=null,
           @vchGuardianImageURL varchar(50)=null,
           @intSchool_id int=null,
           @vchFirst_name  varchar(50)=null,
			@vchTeacherMiddle_name  varchar(50)=null,
			@vchTeachersLast_name  varchar(50)=null,
			@vchPreferedSubject  varchar(50)=null,
			@intsubject_id int=null,
			@vchHighestQualification  varchar(50)=null,
			@intTelNo1 varchar(50)=null,
			@intTelNo2 varchar(50)=null,
			@intMobileNo varchar(50)=null,
			@vchFacebookURL  varchar(50)=null,
			@vchTwitterURL  varchar(50)=null,
			@vchOtherURL  varchar(50)=null,
			@dtTimeToContact varchar(50)=null,
			@vchYearofPassing varchar(50)=null,
			@vchGrade varchar(50)=null,
			@vchuniversity varchar(50)=null,
			@intInserted_id int=null,
			@dtInserted_Date datetime=null,
			@vchInserted_IP varchar(50)=null,
			@intInsert_id int=null,
			@dtInsertedDate datetime=null,
			@InsertIP varchar(50)=null,
			@intStandard_id int =null,
			@intTeacher_id int=null,
			@vchTeacherRemark1 varchar(10)=null,
			@intInsert_By int=null,
			@fltinsertIP varchar(50)=null,
			@vchDegree1 varchar(100)=null,
			@vchInstitution1 varchar(100)=null,
			@vchtxtUniversity1 varchar(100)=null,
			@intPassingYear1 varchar(100)=null,
			@vchPercent1 varchar(100)=null,
			@vchMajorSubject1 varchar(100)=null,
			@vchDegree2 varchar(100)=null,
			@vchInstitution2 varchar(100)=null,
			@vchtxtUniversity2 varchar(100)=null,
			@intPassingYear2 varchar(100)=null,
			@vchPercent2 varchar(100)=null,
			@vchMajorSubject2 varchar(100)=null,
			@vchDegree3 varchar(100)=null,
			@vchInstitution3 varchar(100)=null,
			@vchtxtUniversity3 varchar(100)=null,
			@intPassingYear3 varchar(100)=null,
			@vchPercent3 varchar(100)=null,
			@vchMajorSubject3 varchar(100)=null,
			@vchDegree4 varchar(100)=null,
			@vchInstitution4 varchar(100)=null,
			@vchtxtUniversity4 varchar(100)=null,
			@intPassingYear4 varchar(100)=null,
			@vchPercent4 varchar(100)=null,
			@vchMajorSubject4 varchar(100)=null,
			@vchDegree5 varchar(100)=null,
			@vchInstitution5 varchar(100)=null,
			@vchtxtUniversity5 varchar(100)=null,
			@intPassingYear5 varchar(100)=null,
			@vchPercent5 varchar(100)=null,
			@vchMajorSubject5 varchar(100)=null
		)
As
Begin
	if @command='MaxId'
	Begin
	Select MAX(intParent_id) as id from Parents_Master;
	End

	if @command='ShowProfile'
	Begin
		   		select 
s.vchStudentFirst_name,
s.vchStudentMiddle_name,
s.vchStudentLast_name,
s.vchFatherName,
s.vchMotherName,
s.vchEmail,
CONVERT(VARCHAR(10),s.dtDOB,103)as dtDOB,
s.vchplaceofBirth,
s.vchCast,
s.vchsubcast,
s.vchGender,
s.intHomePhoneNo1,
p.intFatherMobile,
p.intMotherMobile,
p.vchAddress,
s.vchFatherName as FatherName,
p.intFatherMobile as FatherMobileno,
p.vchFatherEmail,
p.vchFatherCompanyName,
p.vchFatherDesignation,
p.intFatherTelNo,
s.vchMotherName as MotherName,
p.intMotherMobile as MotherMobile,
p.vchMotherEmail,
p.vchMotherCompanyName,
p.vchMotherDesignation,
p.intMotherTelNo,
p.vchguardianFirst_name,
p.intGuardianMobile,
p.vchGuardianEmail,
p.vchGuardianCompanyName,
p.vchGuardianDesignation,
p.intGuardianTelNo,
p.vchAddress,
p.vchPermanent,
s.intHomePhoneNo1,
s.intHomePhoneNo2,
s.vchEmergencyConPerson1,
s.intEmergencyContat1,
s.vchEmergencyConPerson2,
s.intEmergencyContat2,
s.vchNeighbour_name,
s.intNeighborConNo,
s.chrBloodGrp,
s.vchHandicapedStatus,
s.vchDescription,
s.vchCast,
s.vchsubcast,
s.vchPassport,
s.dtpassportissue,
s.dtexpiredate,
s.vchMothertongue,
s.vchImageURL,
p.vchMotherImageURL,
p.vchFatherImageURL,
p.vchGuardianImageURL,
s.intstanderd_id,
s.intRollNo,
d.vchDivisionName,
m.vchFirst_name+' '+m.vchMiddle_name+' '+m.vchLast_name as TeacherName,s.vchaadhar_no as Aadhar,p.bus_alert_on1 as bus_alert_on1,p.bus_alert_on2 as bus_alert_on2  
from Student_Master s inner join tblDivision_master d 
on s.intStudent_id=@intUser_id  and s.intschool_id=@intSchool_id
 and s.intstanderd_id=d.intStandard_id and s.intDivision_id=d.intDivision_id
  inner join tblstaff_Master m on m.intTeacher_id=d.intTeacher_id left join 
  Parents_Master p on s.intParentID=p.intParent_id
  

		
	End
	if @command='ShowParentsProfile'
	Begin
	 
		select vchfatherFirst_name ,vchfatherMiddle_name,vchfatherLast_name,intFatherMobile,CONVERT(VARCHAR(10),dtFatherDBO,103)as dtFatherDBO,
			vchFatherEmail,vchAddress,vchFatherPassport_no,vchFatherCompanyName,vchFatherDesignation,
			vchFatherCompAdd,intFatherTelNo,fltFatherIncomeDet,vchFather_vehicleName,vchFather_VehicleNo,
			vchFather_PAN,vchFather_BloodGrp,vchFatherHighestQualification,vchmotherFirst_name ,vchmotherMiddle_name,vchmotherLast_name,intMotherMobile,CONVERT(VARCHAR(10),dtMotherDBO,103)as dtMotherDBO,
			vchMotherEmail,vchPermanent,vchMotherPassport_no,vchMotherCompanyName,vchMotherDesignation,
			vchMotherCompAdd,intMotherTelNo,fltMotherIncomeDet,vchMother_vehicleName,vchMother_VehicleNo,
			vchmother_PAN,vchMother_BloodGrp,vchMotherHighestQualification,vchguardianFirst_name,vchguardianMiddle_name,
			vchguardianLast_name,intGuardianMobile,CONVERT(VARCHAR(10),dtGuardianDBO,103) as dtGuardianDBO,vchGuardianAddress,vchGuardianEmail,
			vchGuardianPassport_no,vchGuardianCompanyName,vchGuardianDesignation,vchGuardianCompAdd,
			intGuardianTelNo,fltGuardianIncomeDet,vchGuardian_vehicleName,vchGuardian_VehicleNo,
			vchGuardian_PAN,vchGuardian_BloodGrp,vchGuardianHighestQualification,vchFatherImageURL,vchMotherImageURL,vchGuardianImageURL from
	Student_Master s,Parents_Master p where s.intParentID=@intUser_id and s.intParentID=p.intParent_id and  s.intschool_id=@intSchool_id
		
	End
	if @command='ShowParentsProfileStu'
	Begin
	 
		select vchfatherFirst_name ,vchfatherMiddle_name,vchfatherLast_name,intFatherMobile,CONVERT(VARCHAR(10),dtFatherDBO,103)as dtFatherDBO,
			vchFatherEmail,vchAddress,vchFatherPassport_no,vchFatherCompanyName,vchFatherDesignation,
			vchFatherCompAdd,intFatherTelNo,fltFatherIncomeDet,vchFather_vehicleName,vchFather_VehicleNo,
			vchFather_PAN,vchFather_BloodGrp,vchFatherHighestQualification,vchmotherFirst_name ,vchmotherMiddle_name,vchmotherLast_name,intMotherMobile,CONVERT(VARCHAR(10),dtMotherDBO,103)as dtMotherDBO,
			vchMotherEmail,vchPermanent,vchMotherPassport_no,vchMotherCompanyName,vchMotherDesignation,
			vchMotherCompAdd,intMotherTelNo,fltMotherIncomeDet,vchMother_vehicleName,vchMother_VehicleNo,
			vchmother_PAN,vchMother_BloodGrp,vchMotherHighestQualification,vchguardianFirst_name,vchguardianMiddle_name,
			vchguardianLast_name,intGuardianMobile,dtGuardianDBO,vchGuardianEmail,vchGuardianAddress,
			vchGuardianPassport_no,vchGuardianCompanyName,vchGuardianDesignation,vchGuardianCompAdd,
			intGuardianTelNo,fltGuardianIncomeDet,vchGuardian_vehicleName,vchGuardian_VehicleNo,
			vchGuardian_PAN,vchGuardian_BloodGrp,vchGuardianHighestQualification,vchFatherImageURL ,vchMotherImageURL,vchGuardianImageURL from
	Student_Master s,Parents_Master p where s.intParentID=@intUser_id and s.intParentID=p.intParent_id and  s.intschool_id=@intSchool_id
		
	End
if @command='ShowParentsProfileStu1'
	Begin
	 
		select vchfatherFirst_name ,vchfatherMiddle_name,vchfatherLast_name,intFatherMobile,CONVERT(VARCHAR(10),dtFatherDBO,103)as dtFatherDBO,
			vchFatherEmail,vchAddress,vchFatherPassport_no,vchFatherCompanyName,vchFatherDesignation,
			vchFatherCompAdd,intFatherTelNo,fltFatherIncomeDet,vchFather_vehicleName,vchFather_VehicleNo,
			vchFather_PAN,vchFather_BloodGrp,vchFatherHighestQualification,vchmotherFirst_name ,vchmotherMiddle_name,vchmotherLast_name,intMotherMobile,CONVERT(VARCHAR(10),dtMotherDBO,103)as dtMotherDBO,
			vchMotherEmail,vchPermanent,vchMotherPassport_no,vchMotherCompanyName,vchMotherDesignation,
			vchMotherCompAdd,intMotherTelNo,fltMotherIncomeDet,vchMother_vehicleName,vchMother_VehicleNo,
			vchmother_PAN,vchMother_BloodGrp,vchMotherHighestQualification,vchguardianFirst_name,vchguardianMiddle_name,
			vchguardianLast_name,intGuardianMobile,dtGuardianDBO,vchGuardianEmail,vchGuardianAddress,
			vchGuardianPassport_no,vchGuardianCompanyName,vchGuardianDesignation,vchGuardianCompAdd,
			intGuardianTelNo,fltGuardianIncomeDet,vchGuardian_vehicleName,vchGuardian_VehicleNo,
			vchGuardian_PAN,vchGuardian_BloodGrp,vchGuardianHighestQualification,vchFatherImageURL ,vchMotherImageURL,vchGuardianImageURL from
	Student_Master s inner join Parents_Master p on s.intStudent_id=@intUser_id and s.intParentID=p.intParent_id
		
	End

	if @command='ShowParentsProfileinDet'
	Begin
		
		select vchfatherFirst_name ,vchfatherMiddle_name,vchfatherLast_name,intFatherMobile,CONVERT(VARCHAR(10),dtFatherDBO,103)as dtFatherDBO,
			vchFatherEmail,vchAddress,vchFatherPassport_no,vchFatherCompanyName,vchFatherDesignation,
			vchFatherCompAdd,intFatherTelNo,fltFatherIncomeDet,vchFather_vehicleName,vchFather_VehicleNo,
			vchFather_PAN,vchFather_BloodGrp,vchFatherHighestQualification,vchmotherFirst_name ,vchmotherMiddle_name,vchmotherLast_name,intMotherMobile,CONVERT(VARCHAR(10),dtMotherDBO,103) as dtMotherDBO,
			vchMotherEmail,vchPermanent,vchMotherPassport_no,vchMotherCompanyName,vchMotherDesignation,
			vchMotherCompAdd,intMotherTelNo,fltMotherIncomeDet,vchMother_vehicleName,vchMother_VehicleNo,
			vchmother_PAN,vchMother_BloodGrp,vchMotherHighestQualification,vchguardianFirst_name,vchguardianMiddle_name,
			vchguardianLast_name,intGuardianMobile,CONVERT(VARCHAR(10),dtGuardianDBO,103) as dtGuardianDBO,vchGuardianEmail,vchGuardianAddress,
			vchGuardianPassport_no,vchGuardianCompanyName,vchGuardianDesignation,vchGuardianCompAdd,
			intGuardianTelNo,fltGuardianIncomeDet,vchGuardian_vehicleName,vchGuardian_VehicleNo,
			vchGuardian_PAN,vchGuardian_BloodGrp,vchGuardianHighestQualification from
	Student_Master s,Parents_Master p where s.intStudent_id=@intStudent_id and s.intParentID=p.intParent_id
		
	End
	if @command='ListParentsProfile'
	Begin
		SELECT s.intStudent_id as StudentId,s.intstanderd_id as  StandardId,s.intDivision_id as DivisionId,s.intRollNo as RollNo,s.vchStudentFirst_name as StudentName,s.vchFatherName as Fathername,s.vchMotherName as Mothername,p.intFatherMobile as Fathermobileno,p.intMotherMobile as Mothermobileno,p.vchFatherCompanyName as Fathercompanyname,p.vchMotherCompanyName as Mothercompanyname FROM Parents_Master p inner join Student_Master s on intParent_id in (select intParentID from Student_Master where intstanderd_id = (select intStandard_id from tblDivision_master where intTeacher_id=@intUser_id))and s.intParentID=p.intParent_id
	End
		if @command='ShowlistudProfile'
	Begin
		SELECT s.intStudent_id as StudentId,s.intstanderd_id as  StandardId,
		s.intDivision_id as DivisionId,s.intRollNo as RollNo,
		s.vchStudentFirst_name+' '+s.vchFatherName+' '+s.vchMotherName as StudentName,
		s.vchEmail as EmailID,CONVERT(VARCHAR(10),s.dtDOB,103) as Dateofbirth,s.vchGender as Gender,
		p.intFatherMobile as Fathermobileno,s.vchpresentAddress as PresentAddress FROM Parents_Master p 
		 inner join Student_Master s on intParent_id in (select intParentID 
		 from Student_Master where intstanderd_id = (select intStandard_id 
		 from tblDivision_master where intTeacher_id=@intUser_id))and 
		 s.intParentID=p.intParent_id
	End

	if @command='SelectId'
	Begin
		select  intStudent_id AS ID,CONVERT(varchar(100), Cast(intStudent_id as decimal(38, 0)))+'-'+vchStudentFirst_name as TEXT from Student_Master where intstanderd_id=(select intStandard_id  from tblDivision_master where intTeacher_id=@intUser_id)
	End
	if @command='ShowTeacherProfile'
	Begin
	
	select intTeacher_id,
	vchFirst_name,
vchTeacherMiddle_name,
vchTeachersLast_name,
vchPreferedSubject,
intsubject_id,
vchGender,
dtDOB,
vchEmail,
vchHighestQualification,
intTelNo1,
intTelNo2,
intMobileNo,
vchFacebookURL,
vchTwitterURL,
vchOtherURL,
vchAddress,
vchPermanent,
vchHighestQualification,
vchYearofPassing,
vchGrade,
vchuniversity,
vchImageURL 
		from tblstaff_Master where intTeacher_id=@intUser_id 
				
			End
			if @command='ListTeacherProfileA'
	Begin
	
	select intTeacher_id,vchFirst_name+' '+vchTeacherMiddle_name+' '+vchTeachersLast_name as Name,
vchPreferedSubject,
intsubject_id as DepartmentId,intMobileNo,vchAddress,
dtTimeToContact from tblstaff_Master 
where intschool_id=@intschool_id and intactive_flg=1 and intsubject_id=@intsubject_id
				
 End
 if @command='ListTeacherProfile'
	Begin
	
	select intTeacher_id,vchFirst_name+' '+vchTeacherMiddle_name+' '+vchTeachersLast_name as Name,
vchPreferedSubject,
intsubject_id as DepartmentId,intMobileNo,vchAddress,vchuniversity,
dtTimeToContact from tblstaff_Master 
where intschool_id=@intschool_id and intactive_flg=1
				
 End
			
			
	if @command='InsertStudentProfile'
	Begin	

insert into Student_Master(vchapplication_no,
   intAddmission_id,intstanderd_id,intDivision_id,
   intAcademicYear_id,intRollNo,intUser_id,
   vchStudentFirst_name,vchStudentMiddle_name,
   vchStudentLast_name,vchFatherName,vchMotherName,
   vchGender,dtDOB,vchplaceofBirth,dtActivationDate,
   vchUser_name,vchPassword,vchActivestatus,
   intActivationBy,vchCast,vchsubcast,vchEmail,vchMothertongue,
   vchpresentAddress,vchpermanentAddress,vchImageURL,
   intHomePhoneNo1,intHomePhoneNo2,vchEmergencyConPerson1,
   intEmergencyContat1,vchEmergencyConPerson2,
   intEmergencyContat2,vchNeighbour_name,intNeighborConNo,
   chrBloodGrp,vchHandicapedStatus,vchDescription,vchPassport,
   dtpassportissue,dtexpiredate)
   values
   (@vchapplication_no,@intAddmission_id,
   @intstanderd_id,@intDivision_id,@intAcademicYear_id,
   @intRollNo,@intUser_id,@vchStudentFirst_name,
   @vchStudentMiddle_name,@vchStudentLast_name,@vchFatherName,
   @vchMotherName,@vchGender,@dtDOB,@vchplaceofBirth,
   @dtActivationDate,@vchUser_name,@vchPassword,
   @vchActivestatus,@intActivationBy,
   @vchCast,@vchsubcast,@vchEmail,@vchMothertongue,
   @vchpresentAddress,@vchpermanentAddress,@vchImageURL,
   @intHomePhoneNo1,@intHomePhoneNo2,@vchEmergencyConPerson1,
   @intEmergencyContat1,@vchEmergencyConPerson2,
   @intEmergencyContat2,@vchNeighbour_name,@intNeighborConNo,
   @chrBloodGrp,@vchHandicapedStatus,@vchDescription,@vchPassport,@dtpassportissue,
   @dtexpiredate)
   End
	
	if @command='InsertParentsProfile'
	Begin	
	INSERT INTO Parents_Master
           (vchfatherFirst_name,
           vchfatherMiddle_name,
           vchfatherLast_name,
           intFatherMobile,
           dtFatherDBO,
           vchFatherEmail,
           vchAddress,
           vchFatherPassport_no,
           vchFatherCompanyName,
           vchFatherDesignation,
           vchFatherCompAdd,
           intFatherTelNo,
           fltFatherIncomeDet,
           vchFather_vehicleName,
           vchFather_VehicleNo,
           vchFather_PAN,
           vchFather_BloodGrp,
           vchFatherHighestQualification,
           vchFatherImageURL,
           vchmotherFirst_name,
           vchmotherMiddle_name,
           vchmotherLast_name,
           intMotherMobile,
           dtMotherDBO,
           vchMotherEmail,
           vchPermanent,
           vchMotherPassport_no,
           vchMotherCompanyName,
           vchMotherDesignation,
           vchMotherCompAdd,
           intMotherTelNo,
           fltMotherIncomeDet,
           vchMother_vehicleName,
           vchMother_VehicleNo,
           vchmother_PAN,
           vchMother_BloodGrp,
           vchMotherHighestQualification,
           vchMotherImageURL,
           vchguardianFirst_name,
           vchguardianMiddle_name,
           vchguardianLast_name,
           intGuardianMobile,
           dtGuardianDBO,
           vchGuardianAddress,
           vchGuardianEmail,
           vchGuardianCompanyName,
           vchGuardianDesignation,
           vchGuardianCompAdd,
           vchGuardianPassport_no,
			intGuardianTelNo,
           fltGuardianIncomeDet,
          vchGuardian_vehicleName,
            vchGuardian_VehicleNo,
             vchGuardian_PAN,
           vchGuardian_BloodGrp,
            vchGuardianHighestQualification,
             vchGuardianImageURL,
             intInsert_id,
             dtInsertedDate,
             InsertIP
             )
     VALUES
           (@vchfatherFirst_name,
           @vchfatherMiddle_name,
           @vchfatherLast_name,
           @intFatherMobile,
           @dtFatherDBO,
           @vchFatherEmail,
           @vchAddress,
           @vchFatherPassport_no,
           @vchFatherCompanyName,
           @vchFatherDesignation,
           @vchFatherCompAdd,
           @intFatherTelNo,
           @fltFatherIncomeDet,
           @vchFather_vehicleName,
           @vchFather_VehicleNo,
           @vchFather_PAN,
           @vchFather_BloodGrp,
           @vchFatherHighestQualification,
           @vchFatherImageURL,
           @vchmotherFirst_name,
           @vchmotherMiddle_name,
           @vchmotherLast_name,
           @intMotherMobile,
           @dtMotherDBO,
           @vchMotherEmail,
           @vchPermanent,
           @vchMotherPassport_no,
           @vchMotherCompanyName,
           @vchMotherDesignation,
           @vchMotherCompAdd,
           @intMotherTelNo,
           @fltMotherIncomeDet,
           @vchMother_vehicleName,
           @vchMother_VehicleNo,
           @vchmother_PAN,
           @vchMother_BloodGrp,
           @vchMotherHighestQualification,
           @vchMotherImageURL,
           @vchguardianFirst_name,
           @vchguardianMiddle_name,
           @vchguardianLast_name,
           @intGuardianMobile,
           @dtGuardianDBO,
           @vchGuardianAddress,
           @vchGuardianEmail,
           @vchGuardianCompanyName,
           @vchGuardianDesignation,
           @vchGuardianCompAdd,
           @vchGuardianPassport_no,
		   @intGuardianTelNo,
           @fltGuardianIncomeDet,
           @vchGuardian_vehicleName,
           @vchGuardian_VehicleNo,
           @vchGuardian_PAN,
           @vchGuardian_BloodGrp,
           @vchGuardianHighestQualification,
           @vchGuardianImageURL,
           @intInsert_id,
           @dtInsertedDate,
           @InsertIP
           )
           end
	if @command='SelectStandardid'
	Begin	
		select DISTINCT(intStandard_id)as intStandard_id from tblDivision_master
	end
	if @command='SelectDivisionid'
	Begin
		select DISTINCT(intDivision_id)as intDivision_id from tblDivision_master
	end 
	if @command='SelectAcademicyearid'
	Begin
		select DISTINCT(intAcademicYear_id) as intAcademicYear_id from tblDivision_master
	end

	if @command='TeacherRemark'
	Begin
	select t.intStudent_id as StudentID,vchFirst_name+' '+vchTeacherMiddle_name+' '+vchTeachersLast_name as Name,s.vchSubjectname as vchSubjectname  ,t.vchTeacherRemark1 as TeacherRemark,CONVERT(VARCHAR(10),t.dtInsertedDate,103) as Insertdate from tblStudent_Teacher_Remark t inner join tblSubject_Master  s on s.intSubject_id =t.intsubject_id inner join tblstaff_Master m on t.intTeacher_id=m.intTeacher_id and t.intStudent_id=@intStudent_id and t.intSchool_id=@intSchool_id
	end
	
	if @command='TeacherRemarkView'
	Begin
		select convert(char,r.intRollNo)+'-'+r.vchStudentFirst_name+' '+vchStudentMiddle_name+' '+vchStudentLast_name as StudentID,vchFirst_name+' '+vchTeacherMiddle_name+' '+vchTeachersLast_name as
	 Name,s.vchSubjectname as vchSubjectname  ,t.vchTeacherRemark1 as TeacherRemark,
	 CONVERT(VARCHAR(10),t.dtInsertedDate,103) as Insertdate from 
	 tblStudent_Teacher_Remark t inner join tblSubject_Master  s on
	  s.intSubject_id =t.intsubject_id inner join tblstaff_Master m 
	   on t.intTeacher_id=m.intTeacher_id inner join tblDivision_master d 
	    on  t.intSchool_id=@intschool_id and d.intTeacher_id=@intUser_id inner join Student_Master r
	    on  d.intStandard_id=t.intStandard_id and r.intStudent_id=t.intStudent_id
	    and s.intSubject_id=t.intSubject_id
	end
	if @command='RemarkStandard'
	Begin
	select distinct(s.intStandard_id) as intStandard_id ,s.vchStandard_name as Standard_name from tblstandard_master s where s.intschool_id=@intSchool_id 
	end
	
	if @command='SeleDepart'
	Begin
	select intDepartment,vchDepartment_name from tblDepartment_Mst where intactive_flg=1 and intschool_id=@intschool_id

	end
	if @command='SeleTeachId'
	Begin
	select intTeacher_id,vchFirst_name+' '+vchTeachersLast_name as Name from tblstaff_Master where intactive_flg=1 and intschool_id=@intschool_id
	end
	if @command='SeleTeachIdDepa'
	Begin
	select intTeacher_id,CONVERT(VARCHAR(20),intTeacher_id)+'-'+vchFirst_name+' '+vchTeachersLast_name as Name from tblstaff_Master where intactive_flg=1 and intschool_id=@intschool_id and intsubject_id=@intsubject_id
	end
	
	if @command='ReTeStandard'
	Begin
	
	 select distinct(intStandard_id) as intStandard_id from tblDivision_master
	  inner join tblstaff_Master on tblstaff_Master.intTeacher_id=tblDivision_master.intTeacher_id
	WHERE tblDivision_master.intTeacher_id=@intUser_id and tblDivision_master.intschool_id=@intschool_id
	
	end
	
	if @command='ReTeDivision'
	Begin
	
	  select vchDivisionName from tblDivision_master
	  inner join tblstaff_Master on tblstaff_Master.intTeacher_id=tblDivision_master.intTeacher_id
	WHERE tblDivision_master.intTeacher_id=@intUser_id and tblDivision_master.intschool_id=@intSchool_id and tblDivision_master.intStandard_id=@intstanderd_id
	
	
	end
	
	if @command='RemarkDivision'
	Begin
	select distinct(intDivision_id)as intDivision_id,vchDivisionName from tblDivision_master where intStandard_id=@intstanderd_id and intschool_id=@intSchool_id
	end
	
	if @command='RemarkDivision1'
	Begin
	select distinct(intDivision_id)as intDivision_id,vchDivisionName from tblDivision_master where intschool_id=@intSchool_id
	end
		if @command='RemarkRollNo'
	Begin
	select CONVERT(VARCHAR(10),intRollNo,103) + '-' +vchStudentFirst_name+' '+vchStudentMiddle_name+' '+vchStudentLast_name as Name,intStudent_id from Student_Master where intstanderd_id=@intstanderd_id and intDivision_id=@intDivision_id and intschool_id=@intschool_id ORDER BY intRollNo
	end
	
		if @command='checkExiRollNo'
	Begin
	
	select count(*)as Countval from Student_Master where intstanderd_id=@intstanderd_id and intDivision_id=@intDivision_id and intschool_id=@intschool_id and introllno=@introllno

	end
	
	if @command='RemarkRollNo1'
	Begin
	select CONVERT(VARCHAR(10),s.intRollNo,103) + '-' +s.vchStudentFirst_name+' '+s.vchStudentMiddle_name+' '+s.vchStudentLast_name as Name,s.intStudent_id from Student_Master s where s.intstanderd_id=@intstanderd_id and s.intDivision_id=@intDivision_id and s.intschool_id=@intschool_id and s.intStudent_id not in (select intStudent_id from tblCard_Assignement)
	end
	if @command='RemarkRollNo2'
	Begin
	select CONVERT(VARCHAR(10),s.intRollNo,103) + '-' +s.vchStudentFirst_name+' '+s.vchStudentMiddle_name+' '+s.vchStudentLast_name as Name,s.intStudent_id from Student_Master s where  s.intschool_id=@intschool_id
	end
	
	if @command='RemarkSubject'
	Begin
	select intSubject_id,vchSubjectName from tblSubject_Master where intSchool_id=@intSchool_id and intStandard_id=@intStandard_id
	end
	
		if @command='InsertTeachRemark'
	Begin
	insert into tblStudent_Teacher_Remark(intStudent_id,intStandard_id,intDivision_id,
intTeacher_id,intSubject_id,vchTeacherRemark1,intInsert_By,dtInsertedDate,
fltinsertIP,intschool_id)
	values 
	(
	@intStudent_id,@intStandard_id,@intDivision_id,
@intTeacher_id,@intSubject_id,@vchTeacherRemark1,@intInsert_By,
@dtInsertedDate,@fltinsertIP,@intschool_id
	)
	end

	if @command='ShowDepartment'
	Begin
	SELECT intDepartment,vchDepartment_name FROM tblDepartment_Mst WHERE intschool_id=@intSchool_id and intactive_flg=1
	end
	
	if @command='insertteacher'
	begin
	insert into tblstaff_Master 
(
	vchFirst_name,
	vchTeacherMiddle_name,
	vchTeachersLast_name,
	vchPreferedSubject,
	intsubject_id,
	vchGender,
	dtDOB,
	vchEmail,
	vchHighestQualification,
	intTelNo1,
	intTelNo2,
	intMobileNo,
	vchFacebookURL,
	vchTwitterURL,
	vchOtherURL,
	vchImageURL,
	vchAddress,
	vchPermanent,
	dtTimeToContact,
	vchYearofPassing,
	vchGrade,
	vchuniversity,
	intSchool_id,
	intInserted_id,
	dtInserted_Date,
	vchInserted_IP,
	vchDegree1,vchInstitution1,vchtxtUniversity1,intPassingYear1,vchPercent1,vchMajorSubject1,
	vchDegree2,vchInstitution2,vchtxtUniversity2,intPassingYear2,vchPercent2,vchMajorSubject2,
	vchDegree3,vchInstitution3,vchtxtUniversity3,intPassingYear3,vchPercent3,vchMajorSubject3,
	vchDegree4,vchInstitution4,vchtxtUniversity4,intPassingYear4,vchPercent4,vchMajorSubject4,
	vchDegree5,vchInstitution5,vchtxtUniversity5,intPassingYear5,vchPercent5,vchMajorSubject5,intActive_flg
	)
	values
	(@vchFirst_name,
	@vchTeacherMiddle_name,
	@vchTeachersLast_name,
	@vchPreferedSubject,
	@intsubject_id,
	@vchGender,
	@dtDOB,
	@vchEmail,
	@vchHighestQualification,
	convert(int,@intTelNo1),
	convert(int,@intTelNo2),
	convert(int,@intMobileNo),
	@vchFacebookURL,
	@vchTwitterURL,
	@vchOtherURL,
	@vchImageURL,
	@vchAddress,
	@vchPermanent,
	convert(varchar(50),@dtTimeToContact,103),
	@vchYearofPassing,
	@vchGrade,
	@vchuniversity,
	@intSchool_id,
	@intInserted_id,
	@dtInserted_Date,
	@vchInserted_IP,
	@vchDegree1,@vchInstitution1,@vchtxtUniversity1,@intPassingYear1,@vchPercent1,@vchMajorSubject1,
	@vchDegree2,@vchInstitution2,@vchtxtUniversity2,@intPassingYear2,@vchPercent2,@vchMajorSubject2,
	@vchDegree3,@vchInstitution3,@vchtxtUniversity3,@intPassingYear3,@vchPercent3,@vchMajorSubject3,
	@vchDegree4,@vchInstitution4,@vchtxtUniversity4,@intPassingYear4,@vchPercent4,@vchMajorSubject4,
	@vchDegree5,@vchInstitution5,@vchtxtUniversity5,@intPassingYear5,@vchPercent5,@vchMajorSubject5,1
	)
	end

	if @command='liststud1'
	begin
	 select s.intStudent_id as intStudent_id ,s.intstanderd_id as intstanderd_id ,s.intDivision_id
	  as intDivision_id,s.intRollNo as intRollNo,
	  s.vchStudentFirst_name+' '+s.vchStudentMiddle_name+' '+s.vchStudentLast_name as name,
	  s.vchEmail as vchEmail,CONVERT(VARCHAR(10),s.dtDOB,103) as dtDOB,s.vchGender as vchGender,
	  p.intFatherMobile as intFatherMobile,s.vchpresentAddress  as vchpresentAddress
	   from   tblDivision_master d inner join Student_Master s
	   on s.intschool_id=@intschool_id and s.intstanderd_id=@intstanderd_id and s.intDivision_id=d.intDivision_id 
	   and s.intDivision_id=@intDivision_id and s.intStudent_id=@intStudent_id left join Parents_Master p 
	   on s.intParentID=p.intParent_id and s.intstanderd_id=d.intStandard_id 
	end
	
	if @command='liststudAll'
	begin
	 select s.intStudent_id as intStudent_id,m.vchStandard_name as intstanderd_id,
	d.vchDivisionName as intDivision_id,s.intRollNo as intRollNo,
	s.vchStudentFirst_name+' '+s.vchStudentMiddle_name+' '+s.vchStudentLast_name as name,s.vchEmail as vchEmail,
	CONVERT(VARCHAR(10),s.dtDOB,103) as dtDOB,s.vchGender as vchGender,p.intFatherMobile as intFatherMobile,
	s.vchpresentAddress as vchpresentAddress from   tblDivision_master d inner join
	 Student_Master s on s.intschool_id=@intschool_id  
	 and s.intstanderd_id=@intstanderd_id and s.intDivision_id=@intDivision_id inner join tblstandard_master m
	 on d.intStandard_id=m.intstandard_id and s.intDivision_id=d.intDivision_id left join Parents_Master p  
	 on  s.intParentID=p.intParent_id and s.intstanderd_id=d.intStandard_id 
	 
	
	end
	
	
	if @command='listparent1'
	begin
	select s.intStudent_id as intStudent_id ,s.intstanderd_id as intstanderd_id ,
s.intDivision_id as intDivision_id,s.intRollNo as intRollNo,
s.vchStudentFirst_name+' '+s.vchStudentMiddle_name+' '+s.vchStudentLast_name as name,
p.vchfatherFirst_name+' '+p.vchfatherMiddle_name+' '+p.vchfatherLast_name as fathername,p.vchmotherFirst_name+' '+p.vchmotherMiddle_name+' '+p.vchmotherLast_name as mothername,
p.intFatherMobile as intFatherMobile,p.intMotherMobile as MotherMobile,p.vchFatherCompanyName as FatherCompanyName,
p.vchMotherCompanyName as MotherCompanyName from   tblDivision_master d,
 Student_Master s,Parents_Master p where s.intschool_id=@intschool_id and
  s.intstanderd_id=@intstanderd_id and s.intDivision_id=@intDivision_id and
   s.intStudent_id=@intStudent_id and s.intParentID=p.intParent_id and
    s.intstanderd_id=d.intStandard_id 
	end
	
	if @command='listparentAll'
	begin
	select s.intStudent_id as intStudent_id ,s.intstanderd_id as intstanderd_id ,
s.intDivision_id as intDivision_id,s.intRollNo as intRollNo,
s.vchStudentFirst_name+' '+s.vchStudentMiddle_name+' '+s.vchStudentLast_name as name,
p.vchfatherFirst_name+' '+p.vchfatherMiddle_name+' '+p.vchfatherLast_name as fathername,p.vchmotherFirst_name+' '+p.vchmotherMiddle_name+' '+p.vchmotherLast_name as mothername,
p.intFatherMobile as intFatherMobile,p.intMotherMobile as MotherMobile,p.vchFatherCompanyName as FatherCompanyName,
p.vchMotherCompanyName as MotherCompanyName from   tblDivision_master d,
 Student_Master s,Parents_Master p where s.intschool_id=@intschool_id and
  s.intstanderd_id=@intstanderd_id and s.intDivision_id=@intDivision_id 
  and s.intParentID=p.intParent_id and s.intstanderd_id=d.intStandard_id 
    
	end
	
	if @command='teachStadiv'
	begin
	select intStandard_id,intDivision_id from tblDivision_master  where intTeacher_id=@intUser_id and intschool_id=@intschool_id
	end





End

 